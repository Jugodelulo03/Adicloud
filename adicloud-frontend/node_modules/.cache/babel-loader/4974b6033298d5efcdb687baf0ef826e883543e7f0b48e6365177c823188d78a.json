{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import'./LoginPage.css';import{ReactComponent as LogoA}from'./assets/logo_tradicional.svg';import{ReactComponent as LogoB}from'./assets/adicouldSOLO.svg';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LoginPage(){// Local state for email, password, and error messages\nconst[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');// Hook to navigate between pages\nconst navigate=useNavigate();// Redirigir si ya hay sesión iniciada\nuseEffect(()=>{const token=localStorage.getItem('token');const role=localStorage.getItem('role');if(token&&role==='admin'){navigate('/dashboard',{replace:true});}else if(token&&role==='user'){navigate('/galery',{replace:true});}},[navigate]);// Handle form submission\nconst handleLogin=async e=>{e.preventDefault();try{// Send login request to backend\nconst response=await axios.post('https://adicloud.onrender.com/login',{email,password});// Save token and role in local storage\nlocalStorage.setItem('token',response.data.token);localStorage.setItem('role',response.data.role);localStorage.setItem('userId',response.data.userId);// Check user role and redirect accordingly\nif(response.data.role==='admin'){navigate('/dashboard');}else{navigate('/galery');}window.location.reload();}catch(err){// Show error message if login fails\nsetError('Invalid credentials. Please try again.');}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(LogoA,{className:\"logo\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"titleLI\",children:[\"Welcome back to\",/*#__PURE__*/_jsx(LogoB,{className:\"adicloud\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,className:\"form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),required:true,className:\"textbox\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),required:true,className:\"textbox\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button\",children:\"Log in\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error})]})]});}export default LoginPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","ReactComponent","LogoA","LogoB","jsx","_jsx","jsxs","_jsxs","LoginPage","email","setEmail","password","setPassword","error","setError","navigate","token","localStorage","getItem","role","replace","handleLogin","e","preventDefault","response","post","setItem","data","userId","window","location","reload","err","children","className","onSubmit","type","placeholder","value","onChange","target","required","style","color"],"sources":["C:/Adicloud/adicloud-frontend/src/pages/LoginPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './LoginPage.css';\r\nimport { ReactComponent as LogoA } from './assets/logo_tradicional.svg';\r\nimport { ReactComponent as LogoB } from './assets/adicouldSOLO.svg';\r\n\r\nfunction LoginPage() {\r\n  // Local state for email, password, and error messages\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n\r\n  // Hook to navigate between pages\r\n  const navigate = useNavigate();\r\n\r\n  // Redirigir si ya hay sesión iniciada\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    const role = localStorage.getItem('role');\r\n    if (token && role === 'admin') {\r\n      navigate('/dashboard', { replace: true });\r\n    } else if (token && role === 'user') {\r\n      navigate('/galery', { replace: true });\r\n    }\r\n  }, [navigate]);\r\n\r\n  // Handle form submission\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      // Send login request to backend\r\n      const response = await axios.post('https://adicloud.onrender.com/login', {\r\n        email,\r\n        password\r\n      });\r\n\r\n      // Save token and role in local storage\r\n      localStorage.setItem('token', response.data.token);\r\n      localStorage.setItem('role', response.data.role);\r\n      localStorage.setItem('userId', response.data.userId);\r\n\r\n      // Check user role and redirect accordingly\r\n      if (response.data.role === 'admin') {\r\n        navigate('/dashboard');\r\n      } else {\r\n        navigate('/galery');\r\n      }\r\n      window.location.reload();\r\n    } catch (err) {\r\n      // Show error message if login fails\r\n      setError('Invalid credentials. Please try again.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <LogoA className='logo'/> \r\n      <div className=\"container\">\r\n        <h2 className='titleLI'>Welcome back to \r\n          <LogoB className='adicloud'/>\r\n        </h2>\r\n        <form onSubmit={handleLogin} className='form'>\r\n          <div className='space'>\r\n            {/* Email input */}\r\n            <input\r\n              type=\"email\"\r\n              placeholder=\"Email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n              className='textbox'\r\n              />\r\n\r\n            {/* Password input */}\r\n            <input\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              required\r\n              className='textbox'\r\n            />\r\n          </div>\r\n          {/* Submit button */}\r\n          <button type=\"submit\" className='button'>Log in</button>\r\n        </form>\r\n\r\n        {/* Display error message */}\r\n        {error && <p style={{ color: 'red' }}>{error}</p>}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}