{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import Header from'./components/Header';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Main(){const[assets,setAssets]=useState([]);const[categories,setCategories]=useState([]);const[categoryFilter,setCategoryFilter]=useState('');const token=localStorage.getItem('token');const navigate=useNavigate();// Fetch categories from backend\nuseEffect(()=>{const fetchCategories=async()=>{try{const res=await axios.get('https://adicloud.onrender.com/assets/categories',{headers:{Authorization:`Bearer ${token}`}});setCategories(res.data);}catch(err){console.error('Error fetching categories:',err);}};fetchCategories();},[token]);// Fetch assets based on selected category\nuseEffect(()=>{const fetchAssets=async()=>{try{let url='https://adicloud.onrender.com/assets';if(categoryFilter){url+=`?category=${categoryFilter}`;}const res=await axios.get(url,{headers:{Authorization:`Bearer ${token}`}});setAssets(res.data);}catch(err){console.error('Error fetching assets:',err);}};fetchAssets();},[categoryFilter,token]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Dashboard\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:e=>setCategoryFilter(e.target.value),value:categoryFilter,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Categories\"}),categories.map((cat,idx)=>/*#__PURE__*/_jsx(\"option\",{value:cat,children:cat},idx))]}),/*#__PURE__*/_jsx(\"ul\",{children:assets.map(asset=>/*#__PURE__*/_jsxs(\"li\",{style:{marginBottom:'20px'},children:[asset.files.length>0&&/*#__PURE__*/_jsx(\"img\",{src:asset.files[0],alt:asset.name,style:{width:'200px',height:'200px',objectFit:'cover'}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:asset.name}),\" - \",asset.category]},asset._id))})]});}export default Main;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","Header","jsx","_jsx","jsxs","_jsxs","Main","assets","setAssets","categories","setCategories","categoryFilter","setCategoryFilter","token","localStorage","getItem","navigate","fetchCategories","res","get","headers","Authorization","data","err","console","error","fetchAssets","url","children","onChange","e","target","value","map","cat","idx","asset","style","marginBottom","files","length","src","alt","name","width","height","objectFit","category","_id"],"sources":["C:/Adicloud/adicloud-frontend/src/pages/UserDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Header from './components/Header';\r\n\r\nfunction Main() {\r\n  const [assets, setAssets] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [categoryFilter, setCategoryFilter] = useState('');\r\n  const token = localStorage.getItem('token');\r\n  const navigate = useNavigate();\r\n\r\n  // Fetch categories from backend\r\n  useEffect(() => {\r\n    const fetchCategories = async () => {\r\n      try {\r\n        const res = await axios.get('https://adicloud.onrender.com/assets/categories', {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        setCategories(res.data);\r\n      } catch (err) {\r\n        console.error('Error fetching categories:', err);\r\n      }\r\n    };\r\n\r\n    fetchCategories();\r\n  }, [token]);\r\n\r\n  // Fetch assets based on selected category\r\n  useEffect(() => {\r\n    const fetchAssets = async () => {\r\n      try {\r\n        let url = 'https://adicloud.onrender.com/assets';\r\n        if (categoryFilter) {\r\n          url += `?category=${categoryFilter}`;\r\n        }\r\n\r\n        const res = await axios.get(url, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n\r\n        setAssets(res.data);\r\n      } catch (err) {\r\n        console.error('Error fetching assets:', err);\r\n      }\r\n    };\r\n\r\n    fetchAssets();\r\n  }, [categoryFilter, token]);\r\n\r\n  return (\r\n    <div>\r\n      <h2>User Dashboard</h2>\r\n\r\n      {/* Category Filter */}\r\n      <select onChange={(e) => setCategoryFilter(e.target.value)} value={categoryFilter}>\r\n        <option value=\"\">All Categories</option>\r\n        {categories.map((cat, idx) => (\r\n          <option key={idx} value={cat}>\r\n            {cat}\r\n          </option>\r\n        ))}\r\n      </select>\r\n\r\n      {/* Asset List */}\r\n      <ul>\r\n        {assets.map((asset) => (\r\n          <li key={asset._id} style={{ marginBottom: '20px' }}>\r\n            {/* Show first image only */}\r\n            {asset.files.length > 0 && (\r\n              <img\r\n                src={asset.files[0]}\r\n                alt={asset.name}\r\n                style={{ width: '200px', height: '200px', objectFit: 'cover' }}\r\n              />\r\n            )}\r\n            <br />\r\n            <strong>{asset.name}</strong> - {asset.category}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}