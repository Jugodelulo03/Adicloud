{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function MyRequests(){const[requests,setRequests]=useState([]);const token=localStorage.getItem('token');const userId=localStorage.getItem('userId');// Ensure userId is stored at login\n// Fetch all user requests\nuseEffect(()=>{const fetchRequests=async()=>{try{const res=await axios.get(`https://adicloud.onrender.com/requests/user/${userId}`,{headers:{Authorization:`Bearer ${token}`}});setRequests(res.data);}catch(err){console.error('Error fetching requests:',err);}};fetchRequests();},[token,userId]);// Helper to group requests by status\nconst groupByStatus=status=>requests.filter(req=>req.status===status);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Requests\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Pending\"}),/*#__PURE__*/_jsx(\"ul\",{children:groupByStatus('Pending').map(req=>{var _req$assetId;return/*#__PURE__*/_jsxs(\"li\",{children:[(_req$assetId=req.assetId)===null||_req$assetId===void 0?void 0:_req$assetId.name,\" - \",req.purpose,\" (Deadline: \",req.deadline,\")\"]},req._id);})}),/*#__PURE__*/_jsx(\"h3\",{children:\"Approved\"}),/*#__PURE__*/_jsx(\"ul\",{children:groupByStatus('Approved').map(req=>{var _req$assetId2;return/*#__PURE__*/_jsxs(\"li\",{children:[(_req$assetId2=req.assetId)===null||_req$assetId2===void 0?void 0:_req$assetId2.name,\" - \",req.purpose,\" (Deadline: \",req.deadline,\")\"]},req._id);})}),/*#__PURE__*/_jsx(\"h3\",{children:\"Rejected\"}),/*#__PURE__*/_jsx(\"ul\",{children:groupByStatus('Rejected').map(req=>{var _req$assetId3;return/*#__PURE__*/_jsxs(\"li\",{children:[(_req$assetId3=req.assetId)===null||_req$assetId3===void 0?void 0:_req$assetId3.name,\" - \",req.purpose,\" (Deadline: \",req.deadline,\")\"]},req._id);})})]});}export default MyRequests;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","MyRequests","requests","setRequests","token","localStorage","getItem","userId","fetchRequests","res","get","headers","Authorization","data","err","console","error","groupByStatus","status","filter","req","children","map","_req$assetId","assetId","name","purpose","deadline","_id","_req$assetId2","_req$assetId3"],"sources":["C:/Adicloud/adicloud-frontend/src/pages/MyRequests.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction MyRequests() {\r\n  const [requests, setRequests] = useState([]);\r\n  const token = localStorage.getItem('token');\r\n  const userId = localStorage.getItem('userId'); // Ensure userId is stored at login\r\n\r\n  // Fetch all user requests\r\n  useEffect(() => {\r\n    const fetchRequests = async () => {\r\n      try {\r\n        const res = await axios.get(`https://adicloud.onrender.com/requests/user/${userId}`, {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        });\r\n        setRequests(res.data);\r\n      } catch (err) {\r\n        console.error('Error fetching requests:', err);\r\n      }\r\n    };\r\n\r\n    fetchRequests();\r\n  }, [token, userId]);\r\n\r\n  // Helper to group requests by status\r\n  const groupByStatus = (status) => requests.filter(req => req.status === status);\r\n\r\n  return (\r\n    <div>\r\n      <h2>My Requests</h2>\r\n\r\n      {/* Pending Requests */}\r\n      <h3>Pending</h3>\r\n      <ul>\r\n        {groupByStatus('Pending').map(req => (\r\n          <li key={req._id}>\r\n            {req.assetId?.name} - {req.purpose} (Deadline: {req.deadline})\r\n          </li>\r\n        ))}\r\n      </ul>\r\n\r\n      {/* Approved Requests */}\r\n      <h3>Approved</h3>\r\n      <ul>\r\n        {groupByStatus('Approved').map(req => (\r\n          <li key={req._id}>\r\n            {req.assetId?.name} - {req.purpose} (Deadline: {req.deadline})\r\n          </li>\r\n        ))}\r\n      </ul>\r\n\r\n      {/* Rejected Requests */}\r\n      <h3>Rejected</h3>\r\n      <ul>\r\n        {groupByStatus('Rejected').map(req => (\r\n          <li key={req._id}>\r\n            {req.assetId?.name} - {req.purpose} (Deadline: {req.deadline})\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MyRequests;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}